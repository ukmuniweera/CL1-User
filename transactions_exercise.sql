mysql -u root -p

CREATE DATABASE Practical;

USE Practical;

-- 1
START TRANSACTION;

CREATE TABLE ORDERS (
    ORDER_ID INT PRIMARY KEY,
    CUSTOMER_NAME VARCHAR(50),
    PRODUCT_NAME VARCHAR(50),
    QUANTITY INT,
    PRICE DECIMAL(10,2)
);

INSERT INTO ORDERS
VALUES
(101, 'John', 'Mouse', 2, 500.00),
(102, 'Emily', 'Keyboard', 1, 1500.00),
(103, 'Raj', 'Monitor', 1, 7500.00),
(104, 'Ali', 'Laptop', 1, 55000.00);

COMMIT;

SELECT * FROM ORDERS;

-- 2
START TRANSACTION;

DELETE 
FROM ORDERS
WHERE PRICE > 5000;

ROLLBACK;

SELECT * FROM ORDERS;

-- 3
START TRANSACTION;

SAVEPOINT savepoint_01;

UPDATE ORDERS
SET PRICE = PRICE - (PRICE * 10 / 100);

SAVEPOINT savepoint_02;

UPDATE ORDERS
SET PRICE = PRICE - (PRICE * 5 / 100);

ROLLBACK TO savepoint_02;

COMMIT;

SELECT * FROM ORDERS;

-- 4
SET TRANSACTION READ ONLY;

START TRANSACTION;

DELETE
FROM ORDERS
WHERE ORDER_ID = 101;

UPDATE ORDERS
SET CUSTOMER_NAME = 'Jane'
WHERE ORDER_ID = 104;

ROLLBACK;

SELECT * FROM ORDERS;
